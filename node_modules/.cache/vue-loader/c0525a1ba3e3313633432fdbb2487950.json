{"remainingRequest":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/halilibrahimguneri/Biges/sentinel-frontend/src/components/settings/logs-filter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/src/components/settings/logs-filter.vue","mtime":1639036167636},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgQmFja0Fycm93IGZyb20gIkAvY29tcG9uZW50cy9hdG9taWMvYmFjay1hcnJvdy52dWUiOwppbXBvcnQgU3ZnSWNvbkxpc3RSYXBvciBmcm9tICJAL2Fzc2V0cy9pY29ucy9zZXJ2aWNlcy9zdmctaWNvbi1saXN0LXJhcG9yLnZ1ZSI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dzRmlsdGVyIiwKICBjb21wb25lbnRzOiB7CiAgICBCYWNrQXJyb3csCiAgICBTdmdJY29uTGlzdFJhcG9yLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXRlOiAiIiwKICAgICAgZGF0ZV92YWx1ZTogIiIsCiAgICAgIHN0YXJ0X3RpbWU6ICIiLAogICAgICBmaW5pc2hfdGltZTogIiIsCiAgICAgIHNlbGVjdGVkX2RhdGU6IGZhbHNlLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoewogICAgICBnZXRMb2dMaXN0RG93bmxvYWQ6ICJsb2dzL2dldExvZ0xpc3REb3dubG9hZCIsCiAgICB9KSwKICAgIGhhbmRsZUNoYW5nZURhdGUodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ2YWwiKTsKICAgICAgY29uc29sZS5sb2codmFsKTsKICAgICAgbGV0IGRhdGUgPSBbXTsKICAgICAgdGhpcy5zZWxlY3RlZF9kYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5zdGFydF90aW1lID0gbW9tZW50KHZhbFswXSkuYWRkKDMsICJob3VycyIpLl9kLnRvSVNPU3RyaW5nKCk7CiAgICAgIGRhdGUucHVzaCh0aGlzLnN0YXJ0X3RpbWUpOwogICAgICB0aGlzLmZpbmlzaF90aW1lID0gbW9tZW50KHZhbFsxXSkuYWRkKDMsICJob3VycyIpLl9kLnRvSVNPU3RyaW5nKCk7CiAgICAgIGRhdGUucHVzaCh0aGlzLmZpbmlzaF90aW1lKTsKICAgICAgdGhpcy4kZW1pdCgib25IYW5kbGVGaWx0cmUiLCBkYXRlKTsKICAgICAgLy8gdGhpcy5zdGFydF90aW1lID0gdmFsWzBdCiAgICAgIC8vIHRoaXMuZmluaXNoX3RpbWUgPSB2YWxbMV0KICAgIH0sCiAgICBvbkRvd25sb2FkTG9nc0xpc3QoKSB7CiAgICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7CgogICAgICBpZiAodGhpcy5zZWxlY3RlZF9kYXRlKSB7CiAgICAgICAgbGV0IHVzZXJfYWN0aXZpdGllcyA9IHRoaXMuZ2V0TG9nTGlzdERvd25sb2FkKHsKICAgICAgICAgIHN0YXJ0X3RpbWU6IHRoaXMuc3RhcnRfdGltZSwKICAgICAgICAgIGZpbmlzaF90aW1lOiB0aGlzLmZpbmlzaF90aW1lLAogICAgICAgICAgcmVzcG9uc2VfdHlwZTogImV4Y2VsIiwKICAgICAgICB9KTsKICAgICAgICB1c2VyX2FjdGl2aXRpZXMudGhlbigocikgPT4gewogICAgICAgICAgaWYgKHIuc3RhdHVzKSB7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtyLmRhdGFdKSk7CiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVybDsKICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgImRvd25sb2FkIiwKICAgICAgICAgICAgICAiU2lzdGVtLWxvZ2xhcmktIiArCiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpICsKICAgICAgICAgICAgICAgICgiMCIgKyAoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgKwogICAgICAgICAgICAgICAgKCIwIiArIGN1cnJlbnREYXRlLmdldERhdGUoKSkuc2xpY2UoLTIpICsKICAgICAgICAgICAgICAgICgiMCIgKyBjdXJyZW50RGF0ZS5nZXRIb3VycygpKS5zbGljZSgtMikgKwogICAgICAgICAgICAgICAgKCIwIiArIGN1cnJlbnREYXRlLmdldE1pbnV0ZXMoKSkuc2xpY2UoLTIpICsKICAgICAgICAgICAgICAgICgiMCIgKyBjdXJyZW50RGF0ZS5nZXRTZWNvbmRzKCkpLnNsaWNlKC0yKSArCiAgICAgICAgICAgICAgICAiLnhsc3giCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBWdWUubm90aWZ5KHsKICAgICAgICAgIHRleHQ6ICJMw7x0ZmVuIHRhcmloIGJpbGdpc2kgZ2lyaW5pei4iLAogICAgICAgICAgZ3JvdXA6ICJlcnJvci10ZW1wbGF0ZSIsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY3JlYXRlKCkgewogICAgICB0aGlzLmRhdGVfdmFsdWVbIjEiXSA9IERhdGUubm93KCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["logs-filter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"logs-filter.vue","sourceRoot":"src/components/settings","sourcesContent":["<template>\n  <div class=\"header\">\n    <div class=\"wrapper\">\n      <router-link to=\"/settings\">\n        <BackArrow></BackArrow>\n      </router-link>\n      <div class=\"controls\">\n        <div class=\"date-range\">\n          <span class=\"label\">Zaman Aralığı</span>\n          <el-date-picker\n            @change=\"handleChangeDate\"\n            v-model=\"date_value\"\n            type=\"datetimerange\"\n            range-separator=\"-\"\n            start-placeholder=\"Başlangıç Tarihi\"\n            end-placeholder=\"Bitiş Tarihi\"\n          >\n            <!-- :default-time=\"['12:00:00', 'new Date()']\" -->\n            <!-- :default-value=\"\" -->\n          </el-date-picker>\n        </div>\n        <div class=\"export-report\">\n          <span class=\"label\">Rapor</span>\n          <el-button class=\"report-button\" @click=\"onDownloadLogsList\">\n            <SvgIconListRapor></SvgIconListRapor>\n          </el-button>\n        </div>\n      </div>\n    </div>\n\n    <span class=\"premise-title\">Kullanıcı İşlem Logları</span>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport moment from \"moment\";\nimport BackArrow from \"@/components/atomic/back-arrow.vue\";\nimport SvgIconListRapor from \"@/assets/icons/services/svg-icon-list-rapor.vue\";\nimport { mapActions } from \"vuex\";\nexport default {\n  name: \"LogsFilter\",\n  components: {\n    BackArrow,\n    SvgIconListRapor,\n  },\n  data() {\n    return {\n      state: \"\",\n      date_value: \"\",\n      start_time: \"\",\n      finish_time: \"\",\n      selected_date: false,\n    };\n  },\n  methods: {\n    ...mapActions({\n      getLogListDownload: \"logs/getLogListDownload\",\n    }),\n    handleChangeDate(val) {\n      console.log(\"val\");\n      console.log(val);\n      let date = [];\n      this.selected_date = true;\n      this.start_time = moment(val[0]).add(3, \"hours\")._d.toISOString();\n      date.push(this.start_time);\n      this.finish_time = moment(val[1]).add(3, \"hours\")._d.toISOString();\n      date.push(this.finish_time);\n      this.$emit(\"onHandleFiltre\", date);\n      // this.start_time = val[0]\n      // this.finish_time = val[1]\n    },\n    onDownloadLogsList() {\n      let currentDate = new Date();\n\n      if (this.selected_date) {\n        let user_activities = this.getLogListDownload({\n          start_time: this.start_time,\n          finish_time: this.finish_time,\n          response_type: \"excel\",\n        });\n        user_activities.then((r) => {\n          if (r.status) {\n            const url = window.URL.createObjectURL(new Blob([r.data]));\n            const link = document.createElement(\"a\");\n            link.href = url;\n            link.setAttribute(\n              \"download\",\n              \"Sistem-loglari-\" +\n                currentDate.getFullYear() +\n                (\"0\" + (currentDate.getMonth() + 1)).slice(-2) +\n                (\"0\" + currentDate.getDate()).slice(-2) +\n                (\"0\" + currentDate.getHours()).slice(-2) +\n                (\"0\" + currentDate.getMinutes()).slice(-2) +\n                (\"0\" + currentDate.getSeconds()).slice(-2) +\n                \".xlsx\"\n            );\n            document.body.appendChild(link);\n            link.click();\n          }\n        });\n      } else {\n        Vue.notify({\n          text: \"Lütfen tarih bilgisi giriniz.\",\n          group: \"error-template\",\n          type: \"error\",\n        });\n      }\n    },\n    create() {\n      this.date_value[\"1\"] = Date.now();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/style.scss\";\n\n.header {\n  padding: 38px;\n\n  background-color: $hybrone_header_background_color;\n}\n.wrapper {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.controls {\n  display: flex;\n\n  .date-range {\n    margin-right: 16px;\n  }\n}\n\n.label {\n  margin-bottom: 6px;\n}\n.premise-title {\n  font-family: Roboto;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 24px;\n  line-height: 28px;\n  display: flex;\n  align-items: center;\n  color: #000000;\n  margin: 48px 0 32px;\n}\n.export-report button {\n  width: 54px;\n  height: 40px;\n}\n.export-report button svg {\n  display: flex;\n  align-items: center;\n}\n.report-button {\n  @extend .sentinel-button;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  // background-color: #e5e5e5;\n\n  // &:hover {\n  //   background: #a6a9ad;\n  //   border-color: #a6a9ad;\n  //   color: #fff;\n  // }\n}\nspan {\n  font-family: Roboto;\n  font-style: normal;\n  font-weight: 200;\n  font-size: 12px;\n  line-height: 14px;\n  display: flex;\n  align-items: center;\n\n  color: #000000;\n}\n</style>\n"]}]}