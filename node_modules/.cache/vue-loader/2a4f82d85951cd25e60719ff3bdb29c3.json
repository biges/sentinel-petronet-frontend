{"remainingRequest":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/halilibrahimguneri/Biges/sentinel-frontend/src/components/dashboard/tracked-device-filter.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/src/components/dashboard/tracked-device-filter.vue","mtime":1635753564602},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635753868455},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/babel-loader/lib/index.js","mtime":1635753869022},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635753868455},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/vue-loader/lib/index.js","mtime":1635753858171}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFN2Z0ljb25EZWxldGUgZnJvbSAiQC9hc3NldHMvaWNvbnMvZGFzaGJvYXJkL3N2Zy1pY29uLWRlbGV0ZS52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRyYWNrZWREZXZpY2VGaWx0ZXIiLAogIGNvbXBvbmVudHM6IHsgU3ZnSWNvbkRlbGV0ZSB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hfa2V5OiAiIiwKICAgICAgc2VhcmNoX2lkczogbnVsbCwKICAgICAgc2VsZWN0ZWRfcHJlbWlzZTogbnVsbCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZ2V0U2VsZWN0ZWRSb3dzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZGF0YVRhYmxlLnNlbGVjdGVkUm93czsKICAgIH0sCiAgICBpc1NlbGVjdGVkKCkgewogICAgICByZXR1cm4gISh0aGlzLiRzdG9yZS5zdGF0ZS5kYXRhVGFibGUuc2VsZWN0ZWRSb3dzLmxlbmd0aCA+IDApOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoewogICAgICBnZXRGaWx0ZXJQcmVtaXNlczogInByZW1pc2UvZ2V0RmlsdGVyUHJlbWlzZXMiLAogICAgICB1cGRhdGVEZXZpY2U6ICJkZXZpY2UvdXBkYXRlRGV2aWNlIiwKICAgICAgZ2V0UHJvc2VjRGV2aWNlc0J5RmlsdGVyOiAiZGV2aWNlL2dldFByb3NlY0RldmljZXNCeUZpbHRlciIsCiAgICAgIGdldFByb3NlY0RldmljZUJ5SWQ6ICJkZXZpY2UvZ2V0UHJvc2VjRGV2aWNlQnlJZCIsCiAgICB9KSwKICAgIG9uU3VibWl0KCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkX3ByZW1pc2UpOwogICAgICBsZXQgbmV3X3RyYWNrZWRfZGV2aWNlID0gdGhpcy51cGRhdGVEZXZpY2UodGhpcy5zZWxlY3RlZF9wcmVtaXNlKTsKICAgICAgbmV3X3RyYWNrZWRfZGV2aWNlLnRoZW4oKHIpID0+IHsKICAgICAgICAvLyBpZiAoci5zdGF0dXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyKTsKICAgICAgICB0aGlzLiRlbWl0KCJvbkNyZWF0ZVRyYWNrZWRQcmVtaXNlIik7CiAgICAgICAgdGhpcy5zZWFyY2hfa2V5ID0gIiI7CiAgICAgICAgLy8gfQogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVCdXR0b24oKSB7CiAgICAgIGlmICh0aGlzLmdldFNlbGVjdGVkUm93cy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5nZXRTZWxlY3RlZFJvd3MuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coaXRlbSk7CiAgICAgICAgICBsZXQgdW5fdHJhY2tlZF9wYXlsb2FkID0gbnVsbDsKICAgICAgICAgIGxldCB1bl90cmFja2VkX2RldmljZSA9IHRoaXMuZ2V0UHJvc2VjRGV2aWNlQnlJZChpdGVtLmlkKTsKCiAgICAgICAgICB1bl90cmFja2VkX2RldmljZS50aGVuKChyKSA9PiB7CiAgICAgICAgICAgIHVuX3RyYWNrZWRfcGF5bG9hZCA9IHsgLi4uciwgaXNfdHJhY2tlZDogZmFsc2UgfTsKICAgICAgICAgICAgbGV0IGRlbGV0ZV90cmFja2VkX2RldmljZSA9IHRoaXMudXBkYXRlRGV2aWNlKHsKICAgICAgICAgICAgICAuLi51bl90cmFja2VkX3BheWxvYWQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkZWxldGVfdHJhY2tlZF9kZXZpY2UudGhlbigocikgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJVbnRyYWNrZWREZXZpY2UiLCByKTsKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJvbkNyZWF0ZVRyYWNrZWRQcmVtaXNlIik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLyoKICAgICAgICBCdXJhZGEgVGFraXAgZWRpbGVuIGNpaGF6bGFyZGFuCiAgICAgICAgw4fEsWvEscWfIEVuZHBvaW50aW5lIGdpZGlsZWNlayAuLi4KICAgICAqLwogICAgfSwKICAgIHF1ZXJ5U2VhcmNoKHF1ZXJ5U3RyaW5nLCBjYikgewogICAgICBpZiAocXVlcnlTdHJpbmcubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuaGFuZGxlT25DaGFuZ2UocXVlcnlTdHJpbmcpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoX2lkcyA9IFtdOwogICAgICB9CiAgICAgIHJldHVybiBjYih0aGlzLnNlYXJjaF9pZHMpOwogICAgfSwKICAgIGFzeW5jIGhhbmRsZU9uQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnNlYXJjaF9pZHMgPSBbXTsKICAgICAgY29uc29sZS5sb2coInZhbCIsIHZhbCk7CiAgICAgIGxldCBkZXZpY2UgPSB0aGlzLmdldFByb3NlY0RldmljZXNCeUZpbHRlcih7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogNSwKICAgICAgICBjdXN0b21fcHJlbWlzZV9pZDogdmFsLAogICAgICB9KTsKICAgICAgZGV2aWNlLnRoZW4oKHIpID0+IHsKICAgICAgICByLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgIGxldCByZXN1bHQgPSB7CiAgICAgICAgICAgIGxhYmVsOiBpdGVtLnByZW1pc2UuY3VzdG9tX3ByZW1pc2VfaWQsCiAgICAgICAgICAgIHZhbHVlOiBpdGVtLnByZW1pc2UuY3VzdG9tX3ByZW1pc2VfaWQsCiAgICAgICAgICAgIGRhdGE6IHsgLi4uaXRlbSwgaXNfdHJhY2tlZDogdHJ1ZSB9LAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuc2VhcmNoX2lkcy5wdXNoKHJlc3VsdCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdChkZXZpY2UpIHsKICAgICAgY29uc29sZS5sb2coIkRldmljZSIsIGRldmljZSk7CiAgICAgIGxldCB0cmFja2VkX2RldmljZSA9IHRoaXMuZ2V0UHJvc2VjRGV2aWNlQnlJZChkZXZpY2UuZGF0YS5pZCk7CiAgICAgIHRyYWNrZWRfZGV2aWNlLnRoZW4oKHIpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygiUiIsIHIpOwogICAgICAgIHRoaXMuc2VsZWN0ZWRfcHJlbWlzZSA9IHsgLi4uciwgaXNfdHJhY2tlZDogdHJ1ZSB9OwogICAgICB9KTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkge30sCn07Cg=="},{"version":3,"sources":["tracked-device-filter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tracked-device-filter.vue","sourceRoot":"src/components/dashboard","sourcesContent":["<template>\n  <div class=\"tracked-filter-content\">\n    <span class=\"tracked-device-title\">Takip Edilen Cihazlar</span>\n    <div class=\"__action\">\n      <el-autocomplete\n        class=\"input-filter\"\n        v-model=\"search_key\"\n        :fetch-suggestions=\"querySearch\"\n        placeholder=\"ID Giriniz\"\n        :trigger-on-focus=\"false\"\n        @select=\"handleSelect\"\n      ></el-autocomplete>\n      <el-button @click=\"onSubmit\">\n        <img src=\"@/assets/icons/dashboard/svg-icon-add.svg\" alt=\"Ekle\" />\n      </el-button>\n      <el-button :disabled=\"isSelected\" @click=\"deleteButton\">\n        <SvgIconDelete :status=\"isSelected\"></SvgIconDelete>\n      </el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport SvgIconDelete from \"@/assets/icons/dashboard/svg-icon-delete.vue\";\nexport default {\n  name: \"TrackedDeviceFilter\",\n  components: { SvgIconDelete },\n  data() {\n    return {\n      search_key: \"\",\n      search_ids: null,\n      selected_premise: null,\n    };\n  },\n  computed: {\n    getSelectedRows() {\n      return this.$store.state.dataTable.selectedRows;\n    },\n    isSelected() {\n      return !(this.$store.state.dataTable.selectedRows.length > 0);\n    },\n  },\n  methods: {\n    ...mapActions({\n      getFilterPremises: \"premise/getFilterPremises\",\n      updateDevice: \"device/updateDevice\",\n      getProsecDevicesByFilter: \"device/getProsecDevicesByFilter\",\n      getProsecDeviceById: \"device/getProsecDeviceById\",\n    }),\n    onSubmit() {\n      console.log(this.selected_premise);\n      let new_tracked_device = this.updateDevice(this.selected_premise);\n      new_tracked_device.then((r) => {\n        // if (r.status) {\n        console.log(r);\n        this.$emit(\"onCreateTrackedPremise\");\n        this.search_key = \"\";\n        // }\n      });\n    },\n    deleteButton() {\n      if (this.getSelectedRows.length > 0) {\n        this.getSelectedRows.forEach((item) => {\n          console.log(item);\n          let un_tracked_payload = null;\n          let un_tracked_device = this.getProsecDeviceById(item.id);\n\n          un_tracked_device.then((r) => {\n            un_tracked_payload = { ...r, is_tracked: false };\n            let delete_tracked_device = this.updateDevice({\n              ...un_tracked_payload,\n            });\n            delete_tracked_device.then((r) => {\n              console.log(\"UntrackedDevice\", r);\n              this.$emit(\"onCreateTrackedPremise\");\n            });\n          });\n        });\n      }\n      /*\n        Burada Takip edilen cihazlardan\n        Çıkış Endpointine gidilecek ...\n     */\n    },\n    querySearch(queryString, cb) {\n      if (queryString.length > 0) {\n        this.handleOnChange(queryString);\n      } else {\n        this.search_ids = [];\n      }\n      return cb(this.search_ids);\n    },\n    async handleOnChange(val) {\n      this.search_ids = [];\n      console.log(\"val\", val);\n      let device = this.getProsecDevicesByFilter({\n        page: 1,\n        limit: 5,\n        custom_premise_id: val,\n      });\n      device.then((r) => {\n        r.forEach((item) => {\n          let result = {\n            label: item.premise.custom_premise_id,\n            value: item.premise.custom_premise_id,\n            data: { ...item, is_tracked: true },\n          };\n          this.search_ids.push(result);\n        });\n      });\n    },\n    handleSelect(device) {\n      console.log(\"Device\", device);\n      let tracked_device = this.getProsecDeviceById(device.data.id);\n      tracked_device.then((r) => {\n        console.log(\"R\", r);\n        this.selected_premise = { ...r, is_tracked: true };\n      });\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/style.scss\";\n.tracked-filter-content {\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n  align-content: center;\n  flex-wrap: nowrap;\n  padding: 15px;\n  .__action {\n    display: flex;\n    align-items: stretch;\n    justify-content: flex-end;\n    align-content: center;\n    flex-wrap: nowrap;\n  }\n\n  .tracked-device-title {\n    display: flex;\n    align-items: stretch;\n    justify-content: flex-end;\n    align-content: center;\n    font-family: Roboto, sans-serif;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 24px;\n    line-height: 28px;\n    display: flex;\n    align-items: center;\n\n    /* Gray Dark */\n\n    color: #444444;\n  }\n  .input-filter {\n    @extend .sentinel-input;\n    max-width: 196px !important;\n    height: 50px;\n    margin-right: 15px !important;\n  }\n  .el-button .el-button--default {\n    &:hover {\n      background-color: #007db7;\n    }\n  }\n}\n</style>\n"]}]}