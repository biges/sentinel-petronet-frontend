{"remainingRequest":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/babel-loader/lib/index.js!/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/halilibrahimguneri/Biges/sentinel-frontend/src/middleware/index.js","dependencies":[{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/src/middleware/index.js","mtime":1639036064559},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOwppbXBvcnQgUXMgZnJvbSAicXMiOwoKdmFyIGNsaWVudEluc3RhbmNlID0gZnVuY3Rpb24gY2xpZW50SW5zdGFuY2UoYmFzZVVSTCkgewogIHJldHVybiBheGlvcy5jcmVhdGUoewogICAgYmFzZVVSTDogYmFzZVVSTCwKICAgIGhlYWRlcnM6IHsKICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgfSwKICAgIHRpbWVvdXQ6IDE1MDAwLAogICAgcGFyYW1zU2VyaWFsaXplcjogZnVuY3Rpb24gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpIHsKICAgICAgcmV0dXJuIFFzLnN0cmluZ2lmeShwYXJhbXMsIHsKICAgICAgICBza2lwTnVsbHM6IHRydWUsCiAgICAgICAgYXJyYXlGb3JtYXQ6ICJyZXBlYXQiCiAgICAgIH0pOwogICAgfQogIH0pOwp9OwoKdmFyIGN5Y2xvcHMgPSBjbGllbnRJbnN0YW5jZSgiaHR0cDovLzE5Mi4xNjguMy4yMDI6MzAwMC9hcGkvdjEvIik7CnZhciBjbGllbnRzID0gW2N5Y2xvcHNdOwpjbGllbnRzLmZvckVhY2goZnVuY3Rpb24gKGNsaWVudCkgewogIGNvbnNvbGUubG9nKGNsaWVudCk7CiAgY2xpZW50LmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICBjb25maWcuaGVhZGVyc1siTG9naW4tVHlwZSJdID0gImFjY291bnQiOwoKICAgIGlmICghY29uZmlnLnVybC5pbmNsdWRlcygidG9rZW4iKSkgewogICAgICB2YXIgdG9rZW4gPSBzdG9yZS5zdGF0ZS5hdXRoLnVzZXIudG9rZW47CiAgICAgIGNvbmZpZy5oZWFkZXJzWyJBdXRob3JpemF0aW9uIl0gPSAiQmVhcmVyICIuY29uY2F0KHRva2VuKTsKICAgIH0KCiAgICByZXR1cm4gY29uZmlnOwogIH0pOwogIGNsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgdmFyIF9yZXNwb25zZSRkYXRhID0gcmVzcG9uc2UuZGF0YSwKICAgICAgICBtZXNzYWdlID0gX3Jlc3BvbnNlJGRhdGEubWVzc2FnZSwKICAgICAgICBzdGF0dXMgPSBfcmVzcG9uc2UkZGF0YS5zdGF0dXM7CgogICAgaWYgKG1lc3NhZ2UpIHsKICAgICAgVnVlLm5vdGlmeSh7CiAgICAgICAgdGV4dDogbWVzc2FnZSwKICAgICAgICBncm91cDogc3RhdHVzID8gInN1Y2Nlc3MtdGVtcGxhdGUiIDogImVycm9yLXRlbXBsYXRlIiwKICAgICAgICB0eXBlOiBzdGF0dXMgPyAic3VjY2VzcyIgOiAiZXJyb3IiCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiByZXNwb25zZTsKICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIHZhciBfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSwKICAgICAgICBtZXNzYWdlID0gX2Vycm9yJHJlc3BvbnNlLmRhdGEubWVzc2FnZSwKICAgICAgICB1cmwgPSBfZXJyb3IkcmVzcG9uc2UuY29uZmlnLnVybCwKICAgICAgICBzdGF0dXMgPSBfZXJyb3IkcmVzcG9uc2Uuc3RhdHVzOwoKICAgIGlmIChtZXNzYWdlKSB7CiAgICAgIFZ1ZS5ub3RpZnkoewogICAgICAgIHRleHQ6IG1lc3NhZ2UsCiAgICAgICAgZ3JvdXA6ICJlcnJvci10ZW1wbGF0ZSIsCiAgICAgICAgdHlwZTogImVycm9yIgogICAgICB9KTsKICAgIH0KCiAgICBpZiAodXJsICE9ICIvdG9rZW4iICYmIFs0MDFdLmluY2x1ZGVzKHN0YXR1cykpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goImF1dGgvbG9nb3V0Iik7CiAgICB9CgogICAgcmV0dXJuIGVycm9yOwogIH0pOwp9KTsKZXhwb3J0IGRlZmF1bHQgewogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoKSB7CiAgICBWdWVbIiRhcGkiXSA9IGN5Y2xvcHM7CiAgICBWdWUucHJvdG90eXBlWyIkYXBpIl0gPSBjeWNsb3BzOwogIH0KfTs="},{"version":3,"sources":["/Users/halilibrahimguneri/Biges/sentinel-frontend/src/middleware/index.js"],"names":["Vue","axios","store","Qs","clientInstance","baseURL","create","headers","timeout","paramsSerializer","params","stringify","skipNulls","arrayFormat","cyclops","clients","forEach","client","console","log","interceptors","request","use","config","url","includes","token","state","auth","user","response","data","message","status","notify","text","group","type","error","dispatch","install","prototype"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,OAAD;AAAA,SACrBJ,KAAK,CAACK,MAAN,CAAa;AACXD,IAAAA,OAAO,EAAPA,OADW;AAEXE,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFE;AAKXC,IAAAA,OAAO,EAAE,KALE;AAMXC,IAAAA,gBAAgB,EAAE,0BAACC,MAAD;AAAA,aAChBP,EAAE,CAACQ,SAAH,CAAaD,MAAb,EAAqB;AACnBE,QAAAA,SAAS,EAAE,IADQ;AAEnBC,QAAAA,WAAW,EAAE;AAFM,OAArB,CADgB;AAAA;AANP,GAAb,CADqB;AAAA,CAAvB;;AAaA,IAAMC,OAAO,GAAGV,cAAc,CAAC,mCAAD,CAA9B;AAEA,IAAMW,OAAO,GAAG,CAACD,OAAD,CAAhB;AAEAC,OAAO,CAACC,OAAR,CAAgB,UAACC,MAAD,EAAY;AAC1BC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACAA,EAAAA,MAAM,CAACG,YAAP,CAAoBC,OAApB,CAA4BC,GAA5B,CAAgC,UAACC,MAAD,EAAY;AAC1CA,IAAAA,MAAM,CAAChB,OAAP,CAAe,YAAf,IAA+B,SAA/B;;AAEA,QAAI,CAACgB,MAAM,CAACC,GAAP,CAAWC,QAAX,CAAoB,OAApB,CAAL,EAAmC;AACjC,UAAIC,KAAK,GAAGxB,KAAK,CAACyB,KAAN,CAAYC,IAAZ,CAAiBC,IAAjB,CAAsBH,KAAlC;AACAH,MAAAA,MAAM,CAAChB,OAAP,CAAe,eAAf,qBAA4CmB,KAA5C;AACD;;AAED,WAAOH,MAAP;AACD,GATD;AAWAN,EAAAA,MAAM,CAACG,YAAP,CAAoBU,QAApB,CAA6BR,GAA7B,CACE,UAACQ,QAAD,EAAc;AAAA,yBAGRA,QAHQ,CAEVC,IAFU;AAAA,QAEFC,OAFE,kBAEFA,OAFE;AAAA,QAEOC,MAFP,kBAEOA,MAFP;;AAKZ,QAAID,OAAJ,EAAa;AACXhC,MAAAA,GAAG,CAACkC,MAAJ,CAAW;AACTC,QAAAA,IAAI,EAAEH,OADG;AAETI,QAAAA,KAAK,EAAEH,MAAM,GAAG,kBAAH,GAAwB,gBAF5B;AAGTI,QAAAA,IAAI,EAAEJ,MAAM,GAAG,SAAH,GAAe;AAHlB,OAAX;AAKD;;AAED,WAAOH,QAAP;AACD,GAfH,EAgBE,UAACQ,KAAD,EAAW;AAAA,0BAOLA,KAPK,CAEPR,QAFO;AAAA,QAGGE,OAHH,mBAGLD,IAHK,CAGGC,OAHH;AAAA,QAIKR,GAJL,mBAILD,MAJK,CAIKC,GAJL;AAAA,QAKLS,MALK,mBAKLA,MALK;;AAQT,QAAID,OAAJ,EAAa;AACXhC,MAAAA,GAAG,CAACkC,MAAJ,CAAW;AACTC,QAAAA,IAAI,EAAEH,OADG;AAETI,QAAAA,KAAK,EAAE,gBAFE;AAGTC,QAAAA,IAAI,EAAE;AAHG,OAAX;AAKD;;AAED,QAAIb,GAAG,IAAI,QAAP,IAAmB,CAAC,GAAD,EAAMC,QAAN,CAAeQ,MAAf,CAAvB,EAA+C;AAC7C/B,MAAAA,KAAK,CAACqC,QAAN,CAAe,aAAf;AACD;;AACD,WAAOD,KAAP;AACD,GApCH;AAsCD,CAnDD;AAqDA,eAAe;AACbE,EAAAA,OADa,qBACH;AACRxC,IAAAA,GAAG,CAAC,MAAD,CAAH,GAAcc,OAAd;AACAd,IAAAA,GAAG,CAACyC,SAAJ,CAAc,MAAd,IAAwB3B,OAAxB;AACD;AAJY,CAAf","sourcesContent":["import Vue from \"vue\";\nimport axios from \"axios\";\nimport store from \"../store\";\nimport Qs from \"qs\";\n\nconst clientInstance = (baseURL) =>\n  axios.create({\n    baseURL,\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    timeout: 15000,\n    paramsSerializer: (params) =>\n      Qs.stringify(params, {\n        skipNulls: true,\n        arrayFormat: \"repeat\",\n      }),\n  });\nconst cyclops = clientInstance(\"http://192.168.3.202:3000/api/v1/\");\n\nconst clients = [cyclops];\n\nclients.forEach((client) => {\n  console.log(client);\n  client.interceptors.request.use((config) => {\n    config.headers[\"Login-Type\"] = \"account\";\n\n    if (!config.url.includes(\"token\")) {\n      let token = store.state.auth.user.token;\n      config.headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    return config;\n  });\n\n  client.interceptors.response.use(\n    (response) => {\n      const {\n        data: { message, status },\n      } = response;\n\n      if (message) {\n        Vue.notify({\n          text: message,\n          group: status ? \"success-template\" : \"error-template\",\n          type: status ? \"success\" : \"error\",\n        });\n      }\n\n      return response;\n    },\n    (error) => {\n      const {\n        response: {\n          data: { message },\n          config: { url },\n          status,\n        },\n      } = error;\n      if (message) {\n        Vue.notify({\n          text: message,\n          group: \"error-template\",\n          type: \"error\",\n        });\n      }\n\n      if (url != \"/token\" && [401].includes(status)) {\n        store.dispatch(\"auth/logout\");\n      }\n      return error;\n    }\n  );\n});\n\nexport default {\n  install() {\n    Vue[\"$api\"] = cyclops;\n    Vue.prototype[\"$api\"] = cyclops;\n  },\n};\n"]}]}