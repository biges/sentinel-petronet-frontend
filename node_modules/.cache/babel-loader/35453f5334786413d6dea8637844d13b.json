{"remainingRequest":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/babel-loader/lib/index.js!/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/halilibrahimguneri/Biges/sentinel-frontend/src/store/auth.js","dependencies":[{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/src/store/auth.js","mtime":1639036167638},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/halilibrahimguneri/Biges/sentinel-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2hhbGlsaWJyYWhpbWd1bmVyaS9CaWdlcy9zZW50aW5lbC1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudC10aW1lem9uZSI7CmltcG9ydCBlbmRwb2ludHMgZnJvbSAiQC9lbmRwb2ludHMiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB1c2VyOiB7fQogIH0sCiAgZ2V0dGVyczogewogICAgaXNMb2dnZWRJbjogZnVuY3Rpb24gaXNMb2dnZWRJbihzdGF0ZSkgewogICAgICByZXR1cm4gISFzdGF0ZS51c2VyLnRva2VuOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS51c2VyLnRva2VuID0gZGF0YTsKICAgICAgY29uc29sZS5sb2coc3RhdGUudXNlci50b2tlbik7CiAgICB9LAogICAgU0VUX0FVVEhfVVNFUjogZnVuY3Rpb24gU0VUX0FVVEhfVVNFUihzdGF0ZSwgZGF0YSkgewogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgc3RhdGUudXNlciA9IGRhdGE7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oX3JlZiwgdG9rZW4pIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICBjb21taXQoIlNFVF9UT0tFTiIsIHRva2VuKTsKICAgIH0sCiAgICBzZXRBdXRoVXNlcjogZnVuY3Rpb24gc2V0QXV0aFVzZXIoX3JlZjIsIGRhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKCiAgICAgIHZhciBwYXlsb2FkID0gX29iamVjdFNwcmVhZCh7fSwgZGF0YSk7CgogICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgdmFyIGxhbmcgPSBuYXZpZ2F0b3IubGFuZ3VhZ2Uuc3BsaXQoIi0iKVswXS50b0xvY2FsZVVwcGVyQ2FzZSgpOwogICAgICB2YXIgdGltZXpvbmUgPSBtb21lbnQudHouZ3Vlc3MoKTsKCiAgICAgIGlmICghcGF5bG9hZC5sYW5ndWFnZSkgewogICAgICAgIHBheWxvYWQubGFuZ3VhZ2UgPSBsYW5nOwogICAgICB9CgogICAgICBpZiAoIXBheWxvYWQudGltZXpvbmUpIHsKICAgICAgICBwYXlsb2FkLnRpbWV6b25lID0gdGltZXpvbmU7CiAgICAgIH0KCiAgICAgIGlmICghcGF5bG9hZC5jdXJyZW5jeSkgewogICAgICAgIHBheWxvYWQuY3VycmVuY3kgPSAiVFJZIjsKICAgICAgfQoKICAgICAgdGhpcy5kaXNwYXRjaCgibG9jYWxlL3NldExhbmciLCBwYXlsb2FkLmxhbmd1YWdlKTsKICAgICAgY29tbWl0KCJTRVRfQVVUSF9VU0VSIiwgcGF5bG9hZCk7CiAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgcGF5bG9hZC5kYXRhLnRva2VuKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICBWdWUucHJvdG90eXBlLiRhcGkoX29iamVjdFNwcmVhZCh7fSwgZW5kcG9pbnRzLmxvZ291dCkpLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgICBpZiAoci5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBjb21taXQoIlNFVF9BVVRIX1VTRVIiLCB7fSk7CiAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICJMb2dpbiIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/halilibrahimguneri/Biges/sentinel-frontend/src/store/auth.js"],"names":["router","moment","endpoints","Vue","namespaced","state","user","getters","isLoggedIn","token","mutations","SET_TOKEN","data","console","log","SET_AUTH_USER","actions","setToken","commit","setAuthUser","payload","lang","navigator","language","split","toLocaleUpperCase","timezone","tz","guess","currency","dispatch","logout","prototype","$api","then","r","status","push","name"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAE;AADD,GAFM;AAKbC,EAAAA,OAAO,EAAE;AACPC,IAAAA,UAAU,EAAE,oBAACH,KAAD;AAAA,aAAW,CAAC,CAACA,KAAK,CAACC,IAAN,CAAWG,KAAxB;AAAA;AADL,GALI;AAQbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCN,KADD,EACQO,IADR,EACc;AACrBP,MAAAA,KAAK,CAACC,IAAN,CAAWG,KAAX,GAAmBG,IAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYT,KAAK,CAACC,IAAN,CAAWG,KAAvB;AACD,KAJQ;AAKTM,IAAAA,aALS,yBAKKV,KALL,EAKYO,IALZ,EAKkB;AACzBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAP,MAAAA,KAAK,CAACC,IAAN,GAAaM,IAAb;AACD;AARQ,GARE;AAkBbI,EAAAA,OAAO,EAAE;AACPC,IAAAA,QADO,0BACcR,KADd,EACqB;AAAA,UAAjBS,MAAiB,QAAjBA,MAAiB;AAC1BA,MAAAA,MAAM,CAAC,WAAD,EAAcT,KAAd,CAAN;AACD,KAHM;AAIPU,IAAAA,WAJO,8BAIiBP,IAJjB,EAIuB;AAAA,UAAhBM,MAAgB,SAAhBA,MAAgB;;AAC5B,UAAIE,OAAO,qBAAQR,IAAR,CAAX;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYM,OAAZ;AACA,UAAIC,IAAI,GAAGC,SAAS,CAACC,QAAV,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,EAAiCC,iBAAjC,EAAX;AACA,UAAIC,QAAQ,GAAGzB,MAAM,CAAC0B,EAAP,CAAUC,KAAV,EAAf;;AACA,UAAI,CAACR,OAAO,CAACG,QAAb,EAAuB;AACrBH,QAAAA,OAAO,CAACG,QAAR,GAAmBF,IAAnB;AACD;;AACD,UAAI,CAACD,OAAO,CAACM,QAAb,EAAuB;AACrBN,QAAAA,OAAO,CAACM,QAAR,GAAmBA,QAAnB;AACD;;AACD,UAAI,CAACN,OAAO,CAACS,QAAb,EAAuB;AACrBT,QAAAA,OAAO,CAACS,QAAR,GAAmB,KAAnB;AACD;;AACD,WAAKC,QAAL,CAAc,gBAAd,EAAgCV,OAAO,CAACG,QAAxC;AACAL,MAAAA,MAAM,CAAC,eAAD,EAAkBE,OAAlB,CAAN;AACAF,MAAAA,MAAM,CAAC,WAAD,EAAcE,OAAO,CAACR,IAAR,CAAaH,KAA3B,CAAN;AACD,KArBM;AAsBPsB,IAAAA,MAtBO,yBAsBY;AAAA,UAAVb,MAAU,SAAVA,MAAU;AACjBf,MAAAA,GAAG,CAAC6B,SAAJ,CACGC,IADH,mBAEO/B,SAAS,CAAC6B,MAFjB,GAIGG,IAJH,CAIQ,UAACC,CAAD,EAAO;AACX,YAAIA,CAAC,CAACC,MAAF,IAAY,GAAhB,EAAqB;AACnBlB,UAAAA,MAAM,CAAC,eAAD,EAAkB,EAAlB,CAAN;AACAlB,UAAAA,MAAM,CAACqC,IAAP,CAAY;AAAEC,YAAAA,IAAI,EAAE;AAAR,WAAZ;AACD;AACF,OATH;AAUD;AAjCM;AAlBI,CAAf","sourcesContent":["import router from \"../router\";\nimport moment from \"moment-timezone\";\nimport endpoints from \"@/endpoints\";\nimport Vue from \"vue\";\n\nexport default {\n  namespaced: true,\n  state: {\n    user: {},\n  },\n  getters: {\n    isLoggedIn: (state) => !!state.user.token,\n  },\n  mutations: {\n    SET_TOKEN(state, data) {\n      state.user.token = data;\n      console.log(state.user.token);\n    },\n    SET_AUTH_USER(state, data) {\n      console.log(data);\n      state.user = data;\n    },\n  },\n  actions: {\n    setToken({ commit }, token) {\n      commit(\"SET_TOKEN\", token);\n    },\n    setAuthUser({ commit }, data) {\n      let payload = { ...data };\n      console.log(payload);\n      let lang = navigator.language.split(\"-\")[0].toLocaleUpperCase();\n      let timezone = moment.tz.guess();\n      if (!payload.language) {\n        payload.language = lang;\n      }\n      if (!payload.timezone) {\n        payload.timezone = timezone;\n      }\n      if (!payload.currency) {\n        payload.currency = \"TRY\";\n      }\n      this.dispatch(\"locale/setLang\", payload.language);\n      commit(\"SET_AUTH_USER\", payload);\n      commit(\"SET_TOKEN\", payload.data.token);\n    },\n    logout({ commit }) {\n      Vue.prototype\n        .$api({\n          ...endpoints.logout,\n        })\n        .then((r) => {\n          if (r.status == 200) {\n            commit(\"SET_AUTH_USER\", {});\n            router.push({ name: \"Login\" });\n          }\n        });\n    },\n  },\n};\n"]}]}